import{m as C,n as M,_ as b,s as P,u as U,r as D,i as v,q as N,o as T,a as n,f as $,g as q,M as E,b as a,c as o,F as y,d as f,k as w,h as r,x as G,e as S,y as k,t as c,p as O,l as R}from"./index-BM3S7LO8.js";import{g as j}from"./storeTemplate-CccY9kVQ.js";import{u as z}from"./friends-CDlrWaCK.js";import{u as H}from"./presents-BwJNw3b0.js";const J=C("assignments",()=>{const i=M(),{generalApiOperation:m}=i;return{...j("assignments",m)}}),K=i=>(O("data-v-dc299033"),i=i(),R(),i),Q={class:"container"},W=K(()=>a("h2",null,"Призначення подарунків:",-1)),X={key:0},Y={class:"friend-content"},Z=["onClick"],ee={key:1,class:"new-friend"},te=["value"],se=["value"],ne={__name:"AssignmentsView",setup(i){const{getCurrentUserPermissions:m}=P(U());let l=D({});const d=z(),p=H(),g=J(),L=v(()=>d.getItemsList),h=v(()=>p.getItemsList),u=N([]),B=v(()=>d.getItemsList.length===0);T(async()=>{await g.loadItemsList(),await d.loadItemsList(),await p.loadItemsList();const t=await F();u.value=t});async function F(){const t=[],s=g.getItemsList;for(const e of s){const I=await d.loadItemById(e.personId),_=await p.loadItemById(e.presentId);t.push({person:{name:I.name,category:I.category},present:{title:_.title},id:e.id})}return console.log("assignments"),console.log(t),t}async function A(t){await g.addItem(t),l={},u.value.push(await V(t))}async function V(t){const s=await d.loadItemById(t.personId),e=await p.loadItemById(t.presentId);return{person:{name:s.name,category:s.category},present:{title:e.title}}}function x(t){u.value=u.value.filter(s=>s.id!==t),g.deleteItem(t)}return(t,s)=>(n(),$(E,null,{default:q(()=>[a("div",Q,[W,B.value?w("",!0):(n(),o("ol",X,[(n(!0),o(y,null,f(u.value,({person:e,present:I,id:_})=>(n(),o("li",{key:_,class:"friend"},[a("div",Y,[a("span",null,c(e.category)+" "+c(e.name)+" ---- "+c(I.title),1),r(m).delete?(n(),o("button",{key:0,onClick:oe=>x(_)},"Видалити",8,Z)):w("",!0)])]))),128))])),r(m).create?(n(),o("div",ee,[a("label",null,[G(" Нове призначення "),S(a("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>r(l).personId=e)},[(n(!0),o(y,null,f(L.value,e=>(n(),o("option",{key:e.id,value:e.id},c(e.category)+" "+c(e.name),9,te))),128))],512),[[k,r(l).personId]]),S(a("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>r(l).presentId=e)},[(n(!0),o(y,null,f(h.value,e=>(n(),o("option",{key:e.id,value:e.id},c(e.title),9,se))),128))],512),[[k,r(l).presentId]])]),a("button",{onClick:s[2]||(s[2]=e=>A(r(l)))},"Додати")])):w("",!0)])]),_:1}))}},ce=b(ne,[["__scopeId","data-v-dc299033"]]);export{ce as default};
